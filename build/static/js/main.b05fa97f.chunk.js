(this.webpackJsonpclient_bs=this.webpackJsonpclient_bs||[]).push([[0],{33:function(e,t,a){},34:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(27),i=a.n(s),r=(a(33),a(2)),o=a.p+"static/media/logo.252cc60b.jpeg",l=(a(34),a(6)),j=a.n(l),u=(a(53),a(0));var d=function(e){var t=Object(n.useState)(),a=Object(r.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(null),o=Object(r.a)(i,2),l=o[0],d=o[1],b=Object(n.useState)(null),O=Object(r.a)(b,2),m=O[0],h=O[1];return Object(n.useEffect)((function(){j.a.get("".concat("http://192.168.1.55",":3000/api/business/nullOrdersWC")).then((function(e){var t=e.data.ordiniWCompany;h(new Array(t.length).fill(null)),s(new Array(t.length).fill(!1)),d(t)})).catch((function(e){console.log(e)}))}),[e.aggiornami]),l?Object(u.jsxs)("div",{className:"no-bill-orders-list",children:[Object(u.jsx)("h3",{children:"Ordini senza fattura"}),Object(u.jsx)("div",{className:"to-choose-list",children:l.map((function(t,a){return console.log("index",a),Object(u.jsx)("div",{className:"order-item",children:Object(u.jsxs)("div",{className:"left-section",children:[Object(u.jsx)("input",{type:"checkbox",id:"custom-checkbox-".concat(a),value:t.id_external_order,checked:c[a],onChange:function(){return function(t,a,n){var i=m.map((function(e,c){return c===t?n?a:null:e}));h(i),e.liftState(i);var r=c.map((function(e,a){return a===t?!e:e}));s(r)}(a,t,!c[a])}}),Object(u.jsxs)("label",{htmlFor:"custom-checkbox-".concat(a),children:[Object(u.jsx)("div",{className:"cont-scroll ltl",children:Object(u.jsx)("span",{className:"first-link",href:"",children:t.number_external_order})}),Object(u.jsxs)("span",{className:"span-cPrice",children:["\u20ac"," ",t.total_order]}),Object(u.jsx)("div",{className:"cont-scroll",children:Object(u.jsx)("span",{className:"first-link",href:"",children:t.Company.name})})]})]})},a)}))})]}):Object(u.jsx)("div",{children:"caricamento"})};a(55);var b=function(e){var t=e.lista,a=Object(n.useState)([]),c=Object(r.a)(a,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){i(null!==t?t:[])}),[t]),Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"La fattura compilata verr\xe0 aggiunta a questi ordini: "}),Object(u.jsx)("div",{className:"gabbia-selected-orders",children:s.filter((function(e,t){return null!==e})).map((function(e,t){return Object(u.jsx)("div",{className:"selected-order",children:e.number_external_order},"uSO".concat(t))}))})]})},O=a(4),m=a(13),h=a(12);a(57);var f=function(e){var t=Object(n.useState)(!1),a=Object(r.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(null),o=Object(r.a)(i,2),l=o[0],d=o[1],b=Object(m.b)({mode:"onBlur",criteriaMode:"all",defaultValues:{iva_amount:"0.00"}}),f=b.register,p=b.watch,x=b.formState.errors,g=b.handleSubmit,v=p("with_iva",!1);return Object(n.useEffect)((function(){j.a.get("".concat("http://192.168.1.55",":3000/api/business/companies")).then((function(e){var t=e.data.companiesList;return console.log("dati scaricati delle compagnie",t),t})).catch((function(e){console.log(e)})).then((function(e){d(e),s(!0)}))}),[]),c?Object(u.jsx)("div",{className:"form-container",children:Object(u.jsxs)("form",{className:"",onSubmit:g((function(t){var a,n;console.log("dati provenienti dal form",t),console.log("dati provenienti dal form",JSON.stringify(t)),console.log("dati provenienti dalla selezione ordini",JSON.stringify(e.ordiniDaAggiornare)),a=t,n=e.ordiniDaAggiornare.filter((function(e){return null!==e})).map((function(e){return e.id_external_order})),j.a.post("".concat("http://192.168.1.55",":3000/api/business/bill"),{data:{form:a,ordersToUpdate:n}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),alert(JSON.stringify(t)),e.aggiornaOrdini()})),children:[Object(u.jsxs)("div",{className:"form-fields",children:[Object(u.jsx)("div",{className:"jfy-right",children:"Numero fattura"}),Object(u.jsxs)("div",{className:"jfy-left",children:[Object(u.jsx)("input",Object(O.a)(Object(O.a)({className:"input-text"},f("id_bs",{required:"Questo campo \xe8 obbligatorio"})),{},{placeholder:"Numero fattura"})),Object(u.jsx)(h.a,{errors:x,name:"id_bs",render:function(e){var t=e.message;return console.log("fanculo"),Object(u.jsx)("span",{style:{"margin-left":"5px",color:"red"},children:t})}})]}),Object(u.jsx)("div",{className:"jfy-right",children:"Azienda: "}),Object(u.jsx)("select",Object(O.a)(Object(O.a)({className:"jfy-left input-text"},f("id_company")),{},{children:l.map((function(e){return Object(u.jsx)("option",{value:e.id_company,children:e.name},"c-".concat(e.id_company))}))})),Object(u.jsx)("div",{className:"jfy-right",children:"Data di fatturazione"}),Object(u.jsx)("input",Object(O.a)({className:"jfy-left input-text calendar",type:"date"},f("bill_date",{valueAsDate:!0}))),Object(u.jsx)("div",{className:"jfy-right",children:"Data di invio fattura"}),Object(u.jsx)("input",Object(O.a)({className:"jfy-left input-text calendar",type:"date"},f("date_notification",{valueAsDate:!0}))),Object(u.jsx)("div",{className:"jfy-right",children:"Data di invio incasso"}),Object(u.jsx)("input",Object(O.a)({className:"jfy-left input-text calendar",type:"date"},f("date_transaction",{valueAsDate:!0}))),Object(u.jsx)("div",{className:"jfy-right",children:"Data di valuta"}),Object(u.jsx)("input",Object(O.a)({className:"jfy-left input-text calendar",type:"date"},f("date_currency",{valueAsDate:!0}))),Object(u.jsx)("div",{className:"jfy-right",children:"Totale fattura"}),Object(u.jsxs)("div",{className:"jfy-left",children:[Object(u.jsx)("input",Object(O.a)({className:"input-text",type:"string"},f("total",{required:"campo obbligatorio",pattern:{value:/[1-9][0-9]{0,4}\.[0-9]{2}/,message:'usa due cifre decimali e NON usare la virgola "," ma il punto "."'}}))),Object(u.jsx)(h.a,{errors:x,name:"total",render:function(e){var t=e.message;return Object(u.jsx)("span",{style:{"margin-left":"5px",color:"red"},children:t})}})]}),Object(u.jsx)("div",{className:"jfy-right",children:"con IVA ?"}),Object(u.jsxs)("div",{className:"jfy-left",children:[Object(u.jsx)("input",Object(O.a)(Object(O.a)({},f("with_iva")),{},{type:"checkbox"})),Object(u.jsx)(h.a,{errors:x,name:"with_iva",render:function(e){var t=e.message;return Object(u.jsx)("span",{children:t})}}),v&&Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:"Totale iva"}),Object(u.jsx)("input",Object(O.a)(Object(O.a)({className:"input-text"},f("iva_total",{required:"Questo campo \xe8 obbligatorio",pattern:{value:/[1-9][0-9]{0,4}\.[0-9]{2}/,message:"usa il formato 0.00"}})),{},{className:"calendar",placeholder:"Totale iva"})),Object(u.jsx)(h.a,{errors:x,name:"iva_total",render:function(e){var t=e.message;return Object(u.jsx)("span",{style:{"margin-left":"5px",color:"red"},children:t})}})]})]}),Object(u.jsx)("div",{className:"jfy-right",children:"Giorni per il pagamento"}),Object(u.jsxs)("div",{className:"jfy-left",children:[Object(u.jsx)("input",Object(O.a)(Object(O.a)({className:"input-text",type:"number"},f("payment_to_GG_days",{required:"Questo campo \xe8 obbligatorio"})),{},{placeholder:"Numero giorni"})),Object(u.jsx)(h.a,{errors:x,name:"payment_to_GG_days",render:function(e){var t=e.message;return Object(u.jsx)("span",{style:{"margin-left":"5px",color:"red"},children:t})}})]}),Object(u.jsx)("div",{className:"jfy-right",children:"Data di pagamento stimata"}),Object(u.jsx)("input",Object(O.a)({className:"jfy-left input-text calendar",type:"date"},f("months_payment_expected",{valueAsDate:!0}))),Object(u.jsx)("div",{className:"jfy-right",children:"Eventuali note "}),Object(u.jsx)("input",Object(O.a)(Object(O.a)({className:"jfy-left input-text"},f("note")),{},{placeholder:"..."}))]}),Object(u.jsx)("div",{children:e.listaSelezionata}),Object(u.jsx)("input",{className:"input-button",type:"submit"})]})}):Object(u.jsx)("div",{children:" in attesa dei dati"})},p=a(3),x=function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null},g=function(){return sessionStorage.getItem("token")||null},v=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},N=function(e,t){sessionStorage.setItem("token",e),sessionStorage.setItem("user",JSON.stringify(t))};a(58);var y=function(e){var t=Object(n.useState)(null),a=Object(r.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(r.a)(i,2),l=o[0],j=o[1],O=x(),m=Object(p.g)();return Object(u.jsxs)("div",{className:"invoice-app",children:[Object(u.jsxs)("div",{className:"welcome",children:["Welcome ",O.name,"!",Object(u.jsx)("input",{type:"button",onClick:function(){v(),m("./login",{replace:!0})},value:"Logout"})]}),Object(u.jsx)("h1",{children:"Aggiungi una fattura"}),Object(u.jsx)(d,{liftState:function(e){s(e)},aggiornami:l}),Object(u.jsx)(f,{ordiniDaAggiornare:c,aggiornaOrdini:function(){j(!l),s(null)},listaSelezionata:Object(u.jsx)(b,{lista:c})})]})};a(59),a(60);var S=function(e){var t=e.key,a=e.bill,c=Object(n.useState)(!0),s=Object(r.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!1),d=Object(r.a)(l,2),b=d[0],O=d[1],m=Object(n.useState)(!1),h=Object(r.a)(m,2),f=h[0],p=h[1];return i&&Object(u.jsxs)("div",{className:"deletableRow ".concat(f?"cancellando":""),children:[Object(u.jsxs)("div",{className:"fissi",children:[Object(u.jsx)("span",{children:a.bill_date}),Object(u.jsx)("span",{children:a.id_bs}),Object(u.jsx)("span",{children:a.total}),Object(u.jsx)("button",{onClick:function(){O(!0)},children:"Elimina"})]}),Object(u.jsxs)("div",{className:"confirmationDiv ".concat(b?"compaio":"scompaio"),children:["Eliminare ?",Object(u.jsx)("button",{className:"input-button-choose",onClick:function(){j.a.delete("".concat("http://192.168.1.55",":3000/api/business/bill/"),{data:{bill:a.id_internal_bill}}).then((function(e){p(!0),setInterval(o(!1),1500)})).catch((function(e){console.log(e)}))},children:"S\xec"}),Object(u.jsx)("button",{className:"input-button-choose",onClick:function(){O(!1)},children:"No"})]})]},t)};var k=function(e){var t=Object(n.useState)(null),a=Object(r.a)(t,2),c=(a[0],a[1],Object(n.useState)(null)),s=Object(r.a)(c,2),i=(s[0],s[1],Object(m.b)({mode:"onBlur",criteriaMode:"all"})),o=i.register,l=i.formState.errors,d=i.handleSubmit,b=Object(n.useState)([]),f=Object(r.a)(b,2),g=f[0],N=f[1],y=Object(n.useState)(!1),k=Object(r.a)(y,2),_=k[0],w=k[1],A=x(),C=Object(p.g)();return Object(u.jsxs)("div",{className:"delContainer",children:[Object(u.jsxs)("div",{className:"welcome",children:["Welcome ",A.name,"!",Object(u.jsx)("input",{type:"button",onClick:function(){v(),C("./login",{replace:!0})},value:"Logout"})]}),Object(u.jsx)("h1",{children:"Elimina una fattura"}),Object(u.jsx)("p",{children:"Per eliminare una fattura seleziona una delle ultime esaurite oppure cercane una pi\xf9 vecchia selezionando un'intervallo di tempo."}),Object(u.jsx)("div",{className:"",children:Object(u.jsxs)("form",{className:"deleteForm",onSubmit:d((function(e){var t=JSON.stringify(e.startFrom).substring(1,11),a=JSON.stringify(e.upTo).substring(1,11);j.a.get("".concat("http://192.168.1.55",":3000/api/business/bill/range?start=").concat(t,"&end=").concat(a)).then((function(t){console.log("dati delle fatture",t.data.rangedBills),N(t.data.rangedBills),w(!0),console.log("dati delle date inseriti dal form",JSON.stringify(e.startFrom))})).catch((function(e){console.log(e)}))})),children:[Object(u.jsx)("div",{className:"",children:"A partire da"}),Object(u.jsx)("input",Object(O.a)({className:"input-text",type:"date"},o("startFrom",{valueAsDate:!0}))),Object(u.jsx)(h.a,{errors:l,name:"startFrom",render:function(e){var t=e.message;return Object(u.jsx)("span",{children:t})}}),Object(u.jsx)("div",{className:"",children:"Fino a"}),Object(u.jsx)("input",Object(O.a)({className:"input-text",type:"date"},o("upTo",{valueAsDate:!0}))),Object(u.jsx)(h.a,{errors:l,name:"upTo",render:function(e){var t=e.message;return Object(u.jsx)("span",{children:t})}}),Object(u.jsx)("input",{className:"input-button",type:"submit"})]})}),_&&Object(u.jsx)("div",{className:"billRowContainer",children:g.map((function(e,t){return Object(u.jsx)(S,{bill:e},"bill"+t)}))})]})};a(61);var _=function(e){var t=Object(n.useState)(e),a=Object(r.a)(t,2),c=a[0],s=a[1];return{value:c,onChange:function(e){s(e.target.value)}}},w=function(e){var t=Object(n.useState)(null),a=Object(r.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(r.a)(i,2),l=o[0],d=o[1],b=Object(p.g)(),m=_(""),h=_("");return Object(u.jsxs)("div",{className:"login-wrapper",children:[Object(u.jsx)("h1",{children:"Esegui l'accesso per modificare le fatture"}),Object(u.jsxs)("label",{children:[Object(u.jsx)("p",{children:"Username"}),Object(u.jsx)("input",Object(O.a)(Object(O.a)({className:"input-text",type:"text"},m),{},{autoComplete:"new-password"}))]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("p",{children:"Password"}),Object(u.jsx)("input",Object(O.a)(Object(O.a)({className:"input-text",type:"password"},h),{},{autoComplete:"new-password"}))]}),c&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("small",{style:{color:"red"},children:c}),Object(u.jsx)("br",{})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{className:"input-button",type:"button",value:l?"Loading...":"Login",onClick:function(){s(null),d(!0),j.a.post("".concat("http://192.168.1.55",":3000/api/auth/users/signin"),{username:m.value,password:h.value}).then((function(e){d(!1),N(e.data.token,e.data.user),b("/addInvoice",{replace:!0})})).catch((function(e){console.log(e),d(!1),401===e.response.status?s(e.response.data.message):s("Something went wrong. Please try again later.")}))},disabled:l}),Object(u.jsx)("br",{})]})]})},A=a(9);var C=a(28),T=["children","redirectTo"];var D=function(e){var t=e.children;return e.redirectTo,Object(C.a)(e,T),console.log("sono in public route"),t};var I=function(e){var t=e.children,a=e.redirectTo,c=g(),s=Object(n.useState)(!1),i=Object(r.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)(!1),b=Object(r.a)(d,2),O=b[0],m=b[1];return Object(n.useEffect)((function(){j.a.get("".concat("http://192.168.1.55",":3000/api/auth/verifyFakeToken?token=").concat(c)).then((function(e){233==e.data.code?(console.log("u used fake token"),m(!1),l(!0)):(console.log("non hai usato un token fake"),m(!0),l(!0)),l(!0)})).catch((function(e){l(!0)}))}),[]),console.log("prova verifica",c),c?O?(console.log("sono stato autorizzato"),t):o?(console.log("non sono stato autorizzato"),Object(u.jsx)(p.a,{to:a})):o?void 0:Object(u.jsx)("div",{className:"content",children:"Checking Authentication..."}):(console.log("il token non esiste"),Object(u.jsx)(p.a,{to:a}))};var F=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(A.b,{to:"/login",children:"Login"}),"Welcome to the Home Page!"]})};var z=function(){var e=Object(n.useState)(!0),t=Object(r.a)(e,2),a=t[0],c=t[1],s=function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),a=t[0],c=t[1];return{setToken:function(e){sessionStorage.setItem("token",JSON.stringify(e)),c(e.token)},token:a}}();return s.token,s.setToken,Object(n.useEffect)((function(){var e=g();e&&j.a.get("".concat("http://192.168.1.55",":3000/api/auth/verifyToken?token=").concat(e)).then((function(e){N(e.data.token,e.data.user),c(!1)})).catch((function(e){v(),c(!1)}))}),[]),a&&g()?Object(u.jsx)("div",{className:"content",children:"Checking Authentication..."}):Object(u.jsx)("div",{className:"wrapper App",children:Object(u.jsxs)(A.a,{children:[Object(u.jsxs)("div",{className:"menu",children:[Object(u.jsx)("img",{alt:"logo del sito",src:o}),Object(u.jsxs)("div",{className:"title-nav-section",children:[Object(u.jsx)("h1",{children:"Black Skip / Fatturazione"}),Object(u.jsxs)("div",{className:"header riga-link",children:[Object(u.jsx)(A.b,{to:"/",children:"Home"}),Object(u.jsx)(A.b,{to:"/login",children:"Login"}),Object(u.jsx)(A.b,{to:"/addInvoice",children:"Aggiungi fattura"}),Object(u.jsx)(A.b,{to:"/deleteInvoice",children:"Elimina fattura"})]})]})]}),Object(u.jsxs)(p.d,{className:"route",children:[Object(u.jsx)(p.b,{className:"",path:"/",element:Object(u.jsx)(F,{})}),Object(u.jsx)(p.b,{className:"",path:"/login",element:Object(u.jsx)(D,{redirectTo:"/addInvoice",children:Object(u.jsx)(w,{})})}),Object(u.jsx)(p.b,{className:"",path:"/addInvoice",element:Object(u.jsx)(I,{redirectTo:"/login",children:Object(u.jsx)(y,{})})}),Object(u.jsx)(p.b,{className:"",path:"/deleteInvoice",element:Object(u.jsx)(I,{redirectTo:"/login",children:Object(u.jsx)(k,{})})})]})]})})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,63)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(z,{})}),document.getElementById("root")),E()}},[[62,1,2]]]);
//# sourceMappingURL=main.b05fa97f.chunk.js.map